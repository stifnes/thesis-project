(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{7119:function(e,t,a){Promise.resolve().then(a.bind(a,6881))},6881:function(e,t,a){"use strict";a.r(t);var l=a(7437),o=a(2265),n=a(2126),r=a(998);a(6463),t.default=()=>{let{data:e}=(0,r.useSession)(),[t,a]=(0,o.useState)(null),[u,s]=(0,o.useState)(""),[i,d]=(0,o.useState)(""),[c,p]=(0,o.useState)(""),m=async()=>{if(!u||!c){alert("Title and Author are required fields.");return}try{let e=new FormData;e.append("filename",t.name);let{uploadId:a}=(await n.Z.post("".concat("http://localhost:8080","/upload/initialize"),e,{headers:{"Content-Type":"multipart/form-data"}})).data;console.log("Upload id is ",a);let l=Math.ceil(t.size/5242880),o=0,r=[];for(let e=0;e<l;e++){let u=t.slice(o,o+5242880);o+=5242880;let s=new FormData;s.append("filename",t.name),s.append("chunk",u),s.append("totalChunks",l),s.append("chunkIndex",e),s.append("uploadId",a);let i=n.Z.post("".concat("http://localhost:8080","/upload"),s,{headers:{"Content-Type":"multipart/form-data"}});r.push(i)}await Promise.all(r);let s=await n.Z.post("".concat("http://localhost:8080","/upload/complete"),{filename:t.name,totalChunks:l,uploadId:a,title:u,description:i,author:c});console.log(s.data)}catch(e){console.error("Error uploading file:",e)}};return(0,l.jsx)("div",{className:"container mx-auto max-w-lg p-10",children:(0,l.jsxs)("form",{encType:"multipart/form-data",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:u,onChange:e=>s(e.target.value),required:!0,className:"px-3 py-2 w-full border rounded-md focus:outline-none focus:border-blue-500"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:i,onChange:e=>d(e.target.value),className:"px-3 py-2 w-full border rounded-md focus:outline-none focus:border-blue-500"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("input",{type:"text",name:"author",placeholder:"Author",value:c,onChange:e=>p(e.target.value),required:!0,className:"px-3 py-2 w-full border rounded-md focus:outline-none focus:border-blue-500"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("input",{type:"file",name:"file",onChange:e=>{a(e.target.files[0])},className:"px-3 py-2 w-full border rounded-md focus:outline-none focus:border-blue-500"})}),(0,l.jsx)("button",{type:"button",onClick:m,className:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Upload"})]})})}}},function(e){e.O(0,[998,913,971,23,744],function(){return e(e.s=7119)}),_N_E=e.O()}]);